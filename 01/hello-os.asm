; hello-os
; TAB=4

;FAT12 image specification

    DB  0xeb, 0x4e, 0x90
    DB  "HELLOIPL"      ;启动区名称
    DW  512             ;扇区大小
    DB  1               ;簇的大小：1个扇区
    DW  1               ;FAT起始位置（一般是第一个扇区）
    DB  2               ;FAT的个数(必须为2)
    DW  224             ;根目录的大小，一般设置成224项
    DW  2880            ;磁盘的大小，2880扇区
    DB  0xf0            ;磁盘的种类，必须是0xf0
    DW  9               ;FAT的长度：必须是9扇区
    DW  18              ;一个磁道18个扇区
    DW  2               ;磁头数：2
    DD  0               ;不使用分区，必须是0
    DD  2880            ;重写一次磁盘大小
    DB  0,0,0x29        ;固定值
    DD  0xffffffff      ;
    DB  "HELLO-OS   "   ;磁盘名称 11字节
    DB  "FAT12   "      ;磁盘格式名称(8字节)
    RESB    18          ;保留18字节

;程序主体
    DB  0xB8, 0x00, 0x00, 0x8E, 0xD0, 0xBC, 0x00, 0x7C
    DB  0x8E, 0xD8, 0x8E, 0xC0, 0xBE, 0x74, 0x7C, 0x8A
    DB  0x04, 0x83, 0xC6, 0x01, 0x3C, 0x00, 0x74, 0x09
    DB  0xB4, 0x0E, 0xBB, 0x0F, 0x00, 0xCD, 0x10, 0xEB
    DB  0xEE, 0xF4, 0xEB, 0xFD

;信息显示
    DB  0x0a, 0x0a      ;两个换行
    DB  "hello, world"  
    DB  0x0a
    DB  0

    RESB    0x1fe-$     ;填写0x00直到0x001fe
    DB  0x55, 0xaa

;启动区以外部分的输出
    DB  0xf0, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00
    RESB    4600
    DB  0xf0, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00
    RESB    1469432
